{% extends 'base.html' %}
{% block content %}
<h2>Received Applications</h2>
<table style="width: 100%; background: white; border-collapse: collapse; margin-top: 1.5rem; border-radius: 8px; overflow: hidden;">
    <tr style="background: #2c3e50; color: white;">
        <th style="padding: 12px; text-align: left;">Applicant</th>
        <th style="padding: 12px; text-align: left;">Role</th>
        <th style="padding: 12px; text-align: left;">Resume</th>
        <th style="padding: 12px; text-align: left;">Status</th>
        <th style="padding: 12px; text-align: left;">Update</th>
    </tr>
    {% for app in applicants %}
    <tr style="border-bottom: 1px solid #eee;">
        <td style="padding: 12px;">{{ app['username'] }}<br><small>{{ app['email'] }}</small></td>
        <td style="padding: 12px;">{{ app['title'] }}</td>
        <td style="padding: 12px;"><a href="{{ url_for('download_file', filename=app['resume_file']) }}" target="_blank">Download</a></td>
        <td style="padding: 12px;"><strong>{{ app['status'] }}</strong></td>
        <td style="padding: 12px;">
            <form action="{{ url_for('update_status', app_id=app['id']) }}" method="POST" style="display: flex; gap: 5px;">
                <select name="status" style="width: auto; margin: 0; padding: 4px;">
                    <option value="Pending">Pending</option>
                    <option value="Accepted">Accepted</option>
                    <option value="Rejected">Rejected</option>
                </select>
                <button type="submit" style="width: auto; padding: 4px 10px;">Save</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}